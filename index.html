<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6KXCTD5Z9H"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-6KXCTD5Z9H');</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGSIST | Free Live Ag Dashboard - Corn, Soybean, Wheat Prices</title>
    <meta name="description" content="Free live agricultural commodity prices, weather radar, and farm tools. Corn, soybean, wheat futures updated every 15 minutes. Built by Wisconsin farmers.">
    <meta name="keywords" content="corn prices today, soybean prices, wheat futures, ag commodity prices, farm dashboard, grain prices, livestock prices">
    <link rel="canonical" href="https://agsist.com/">
    
    <!-- Schema.org for Organization -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "AGSIST",
        "description": "Free agricultural dashboard with live commodity prices, farm calculators, and tools for farmers",
        "url": "https://agsist.com",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://agsist.com/tools.html",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "AGSIST",
        "url": "https://agsist.com",
        "logo": "https://agsist.com/icon-512.png",
        "description": "Agricultural technology tools built by farmers for farmers in Wisconsin",
        "address": {
            "@type": "PostalAddress",
            "addressRegion": "WI",
            "addressCountry": "US"
        },
        "sameAs": [
            "https://farmers1st.com",
            "https://lokedrone.com"
        ]
    }
    </script>
    
    <!-- PWA -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#e6b042">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="AGSIST">
    
    <link rel="icon" type="image/png" sizes="32x32" href="favicon.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    <meta property="og:title" content="AGSIST | Free Live Ag Dashboard">
    <meta property="og:description" content="Free live commodity prices, weather radar, and farm tools. Built by Wisconsin farmers.">
    <meta property="og:image" content="https://agsist.com/og-image.png">
    <meta property="og:url" content="https://agsist.com/">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --bg: #0a0a0a;
            --card: #111;
            --border: #333;
            --text: #f5f5f5;
            --dim: #999;
            --accent: #e6b042;
            --green: #4ade80;
            --red: #f87171;
        }
        
        body {
            font-family: 'JetBrains Mono', monospace;
            background: var(--bg);
            color: var(--text);
            line-height: 1.5;
            min-height: 100vh;
            font-size: 16px;
        }
        
        /* NAV - sticky but slim */
        nav {
            background: var(--card);
            border-bottom: 1px solid var(--border);
            padding: 10px 16px;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        /* TICKER - slower, full width fill */
        .ticker-wrap {
            background: #000;
            border-bottom: 1px solid var(--border);
            overflow: hidden;
            padding: 10px 0;
        }
        
        .ticker {
            display: flex;
            gap: 50px;
            animation: ticker-scroll 120s linear infinite;
            white-space: nowrap;
            width: max-content;
            padding: 0 20px;
        }
        
        .ticker:hover {
            animation-play-state: paused;
        }
        
        .ticker-item {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            font-size: 0.95rem;
        }
        
        .ticker-item .label {
            color: var(--dim);
            font-weight: 500;
        }
        
        .ticker-item .price {
            color: var(--text);
            font-weight: 700;
        }
        
        .ticker-item .change {
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .ticker-item .change.up { color: var(--green); }
        .ticker-item .change.down { color: var(--red); }
        
        .ticker-item.news {
            color: var(--accent);
            max-width: 500px;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        @keyframes ticker-scroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        
        .nav-inner {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-weight: 700;
            font-size: 1.4rem;
            color: var(--accent);
            text-decoration: none;
        }
        
        .nav-links {
            display: flex;
            gap: 6px;
        }
        
        .nav-links a {
            color: var(--dim);
            text-decoration: none;
            padding: 8px 14px;
            border-radius: 4px;
            font-size: 0.9rem;
            transition: all 0.2s;
        }
        
        .nav-links a:hover, .nav-links a.active {
            color: var(--text);
            background: var(--border);
        }
        
        /* MAIN CONTENT - wider */
        main {
            max-width: 1600px;
            margin: 0 auto;
            padding: 12px;
        }
        
        /* UPDATE TIME */
        .update-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-size: 0.85rem;
            color: var(--dim);
        }
        
        /* PRICE CARDS */
        .price-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 12px;
        }
        
        .price-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 14px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }
        
        .price-card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(230,176,66,0.15);
        }
        
        .price-card.featured {
            border-color: var(--accent);
            background: linear-gradient(135deg, var(--card) 0%, #1a1500 100%);
        }
        
        .price-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .price-label {
            font-size: 0.95rem;
            color: var(--text);
            font-weight: 600;
        }
        
        .price-contract {
            font-size: 0.75rem;
            color: var(--dim);
            background: var(--bg);
            padding: 3px 8px;
            border-radius: 4px;
        }
        
        .price-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .price-change {
            font-size: 0.95rem;
            font-weight: 600;
        }
        
        .price-change.up { color: var(--green); }
        .price-change.down { color: var(--red); }
        
        /* HOVER EXPAND DETAILS */
        .price-details {
            display: none;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--border);
            font-size: 0.85rem;
        }
        
        .price-card:hover .price-details {
            display: block;
        }
        
        .price-details-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
            color: var(--dim);
        }
        
        .price-details-row span:last-child {
            color: var(--text);
        }
        
        /* SECTION HEADERS */
        .section-header {
            font-size: 0.85rem;
            color: var(--dim);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin: 16px 0 10px;
            padding-bottom: 6px;
            border-bottom: 1px solid var(--border);
        }
        
        /* SECONDARY PRICES - 6 across on desktop */
        .secondary-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            margin-bottom: 12px;
        }
        
        .secondary-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }
        
        .secondary-card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(230,176,66,0.15);
        }
        
        .secondary-label {
            font-size: 0.85rem;
            color: var(--dim);
            margin-bottom: 6px;
        }
        
        .secondary-value {
            font-size: 1.25rem;
            font-weight: 700;
        }
        
        .secondary-change {
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        /* Hover details for secondary cards */
        .secondary-details {
            display: none;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid var(--border);
            font-size: 0.8rem;
        }
        
        .secondary-card:hover .secondary-details {
            display: block;
        }
        
        .secondary-details-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 3px;
            color: var(--dim);
        }
        
        .secondary-details-row span:last-child {
            color: var(--text);
        }
        
        .sym {
            font-size: 0.7rem;
            color: var(--dim) !important;
        }
        
        /* WEATHER - no scroll, fixed height */
        .weather-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .weather-card iframe {
            width: 100%;
            height: 420px;
            border: none;
            display: block;
        }
        
        /* NEWS - tighter spacing for more articles */
        .news-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px;
        }
        
        .news-item {
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
        }
        
        .news-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }
        
        .news-item:first-child {
            padding-top: 0;
        }
        
        .news-item a {
            color: var(--text);
            text-decoration: none;
            font-size: 0.9rem;
            line-height: 1.35;
            display: block;
        }
        
        .news-item a:hover {
            color: var(--accent);
        }
        
        .news-source {
            font-size: 0.7rem;
            color: var(--dim);
            margin-top: 4px;
        }
        
        /* FOOTER */
        footer {
            border-top: 1px solid var(--border);
            padding: 20px 16px;
            margin-top: 30px;
            text-align: center;
            font-size: 0.75rem;
            color: var(--dim);
        }
        
        footer a {
            color: var(--accent);
            text-decoration: none;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }
        
        /* TABLET */
        @media (min-width: 768px) {
            main { padding: 16px 20px; }
            
            .price-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .secondary-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .two-col {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 12px;
            }
            
            .weather-card iframe {
                height: 380px;
            }
        }
        
        /* DESKTOP */
        @media (min-width: 1200px) {
            main { padding: 16px 24px; }
            
            .secondary-grid {
                grid-template-columns: repeat(6, 1fr);
            }
            
            .weather-card iframe {
                height: 400px;
            }
        }
        
        /* MOBILE - stack price cards 2x2 */
        @media (max-width: 767px) {
            .price-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .price-value {
                font-size: 1.5rem;
            }
            .secondary-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            /* Mobile nav - smaller, scrollable */
            .nav-links {
                gap: 4px;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                scrollbar-width: none;
            }
            .nav-links::-webkit-scrollbar {
                display: none;
            }
            .nav-links a {
                padding: 6px 8px;
                font-size: 0.75rem;
                white-space: nowrap;
            }
            .logo {
                font-size: 1.1rem;
            }
        }
        
        /* LOADING STATE */
        .loading {
            color: var(--dim);
            font-style: italic;
        }
        
        /* Screen reader only - for SEO H1 */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0,0,0,0);
            white-space: nowrap;
            border: 0;
        }
    </style>
</head>
<body>
    <nav>
        <div class="nav-inner">
            <a href="/" class="logo">AGSIST</a>
            <div class="nav-links">
                <a href="/tools.html">Tools</a>
                <a href="/fastfacts.html">Fast Facts</a>
                <a href="/learn.html">Learn</a>
                <a href="/calendar.html">Calendar</a>
                <a href="/resources.html">Links</a>
            </div>
        </div>
    </nav>
    
    <!-- TICKER -->
    <div class="ticker-wrap">
        <div class="ticker" id="ticker">
            <!-- Populated by JS -->
        </div>
    </div>
    
    <main>
        <h1 class="sr-only">AGSIST - Free Live Agricultural Commodity Prices, News & Weather Dashboard</h1>
        <div id="welcome-msg" style="margin-bottom:12px;font-size:0.95rem;color:var(--text)"></div>
        <div class="update-bar">
            <span>Last updated: <span id="update-time" class="loading">Loading...</span></span>
            <span>Data auto-refreshes</span>
        </div>
        
        <!-- PRIMARY: Corn & Soybeans -->
        <div class="price-grid" id="primary-prices">
            <div class="price-card featured" id="card-corn">
                <div class="price-header">
                    <span class="price-label">üåΩ Corn</span>
                    <span class="price-contract" id="corn-contract">--</span>
                </div>
                <div class="price-value" id="corn-price">--</div>
                <div class="price-change" id="corn-change">--</div>
                <div class="price-details">
                    <div class="price-details-row"><span>Prev Close</span><span id="corn-prev">--</span></div>
                    <div class="price-details-row"><span>52-wk High</span><span id="corn-high">--</span></div>
                    <div class="price-details-row"><span>52-wk Low</span><span id="corn-low">--</span></div>
                    <div class="price-details-row"><span>Symbol</span><span id="corn-symbol" style="font-size:0.75rem;color:var(--dim)">--</span></div>
                </div>
            </div>
            <div class="price-card" id="card-corn-dec">
                <div class="price-header">
                    <span class="price-label">üåΩ Corn Harvest</span>
                    <span class="price-contract">Dec '26</span>
                </div>
                <div class="price-value" id="corn-dec-price">--</div>
                <div class="price-change" id="corn-dec-change">--</div>
                <div class="price-details">
                    <div class="price-details-row"><span>Prev Close</span><span id="corn-dec-prev">--</span></div>
                    <div class="price-details-row"><span>52-wk High</span><span id="corn-dec-high">--</span></div>
                    <div class="price-details-row"><span>52-wk Low</span><span id="corn-dec-low">--</span></div>
                    <div class="price-details-row"><span>Symbol</span><span id="corn-dec-symbol" style="font-size:0.75rem;color:var(--dim)">--</span></div>
                </div>
            </div>
            <div class="price-card featured" id="card-soy">
                <div class="price-header">
                    <span class="price-label">ü´ò Soybeans</span>
                    <span class="price-contract" id="soy-contract">--</span>
                </div>
                <div class="price-value" id="soy-price">--</div>
                <div class="price-change" id="soy-change">--</div>
                <div class="price-details">
                    <div class="price-details-row"><span>Prev Close</span><span id="soy-prev">--</span></div>
                    <div class="price-details-row"><span>52-wk High</span><span id="soy-high">--</span></div>
                    <div class="price-details-row"><span>52-wk Low</span><span id="soy-low">--</span></div>
                    <div class="price-details-row"><span>Symbol</span><span id="soy-symbol" style="font-size:0.75rem;color:var(--dim)">--</span></div>
                </div>
            </div>
            <div class="price-card" id="card-soy-nov">
                <div class="price-header">
                    <span class="price-label">ü´ò Beans Harvest</span>
                    <span class="price-contract">Nov '26</span>
                </div>
                <div class="price-value" id="soy-nov-price">--</div>
                <div class="price-change" id="soy-nov-change">--</div>
                <div class="price-details">
                    <div class="price-details-row"><span>Prev Close</span><span id="soy-nov-prev">--</span></div>
                    <div class="price-details-row"><span>52-wk High</span><span id="soy-nov-high">--</span></div>
                    <div class="price-details-row"><span>52-wk Low</span><span id="soy-nov-low">--</span></div>
                    <div class="price-details-row"><span>Symbol</span><span id="soy-nov-symbol" style="font-size:0.75rem;color:var(--dim)">--</span></div>
                </div>
            </div>
        </div>
        
        <!-- SECONDARY: Other commodities -->
        <div class="section-header">Livestock & Energy</div>
        <div class="secondary-grid" id="secondary-prices">
            <div class="secondary-card">
                <div class="secondary-label">üåæ Wheat</div>
                <div class="secondary-value" id="wheat-price">--</div>
                <div class="secondary-change" id="wheat-change">--</div>
                <div class="secondary-details">
                    <div class="secondary-details-row"><span>Prev Close</span><span id="wheat-prev">--</span></div>
                    <div class="secondary-details-row"><span>52-wk High</span><span id="wheat-high">--</span></div>
                    <div class="secondary-details-row"><span>52-wk Low</span><span id="wheat-low">--</span></div>
                    <div class="secondary-details-row"><span>Symbol</span><span id="wheat-symbol" class="sym">--</span></div>
                </div>
            </div>
            <div class="secondary-card">
                <div class="secondary-label">üêÑ Live Cattle</div>
                <div class="secondary-value" id="cattle-price">--</div>
                <div class="secondary-change" id="cattle-change">--</div>
                <div class="secondary-details">
                    <div class="secondary-details-row"><span>Prev Close</span><span id="cattle-prev">--</span></div>
                    <div class="secondary-details-row"><span>52-wk High</span><span id="cattle-high">--</span></div>
                    <div class="secondary-details-row"><span>52-wk Low</span><span id="cattle-low">--</span></div>
                    <div class="secondary-details-row"><span>Symbol</span><span id="cattle-symbol" class="sym">--</span></div>
                </div>
            </div>
            <div class="secondary-card">
                <div class="secondary-label">üêÇ Feeder Cattle</div>
                <div class="secondary-value" id="feeder-price">--</div>
                <div class="secondary-change" id="feeder-change">--</div>
                <div class="secondary-details">
                    <div class="secondary-details-row"><span>Prev Close</span><span id="feeder-prev">--</span></div>
                    <div class="secondary-details-row"><span>52-wk High</span><span id="feeder-high">--</span></div>
                    <div class="secondary-details-row"><span>52-wk Low</span><span id="feeder-low">--</span></div>
                    <div class="secondary-details-row"><span>Symbol</span><span id="feeder-symbol" class="sym">--</span></div>
                </div>
            </div>
            <div class="secondary-card">
                <div class="secondary-label">üê∑ Lean Hogs</div>
                <div class="secondary-value" id="hogs-price">--</div>
                <div class="secondary-change" id="hogs-change">--</div>
                <div class="secondary-details">
                    <div class="secondary-details-row"><span>Prev Close</span><span id="hogs-prev">--</span></div>
                    <div class="secondary-details-row"><span>52-wk High</span><span id="hogs-high">--</span></div>
                    <div class="secondary-details-row"><span>52-wk Low</span><span id="hogs-low">--</span></div>
                    <div class="secondary-details-row"><span>Symbol</span><span id="hogs-symbol" class="sym">--</span></div>
                </div>
            </div>
            <div class="secondary-card">
                <div class="secondary-label">ü•õ Class III Milk</div>
                <div class="secondary-value" id="milk-price">--</div>
                <div class="secondary-change" id="milk-change">--</div>
                <div class="secondary-details">
                    <div class="secondary-details-row"><span>Prev Close</span><span id="milk-prev">--</span></div>
                    <div class="secondary-details-row"><span>52-wk High</span><span id="milk-high">--</span></div>
                    <div class="secondary-details-row"><span>52-wk Low</span><span id="milk-low">--</span></div>
                    <div class="secondary-details-row"><span>Symbol</span><span id="milk-symbol" class="sym">--</span></div>
                </div>
            </div>
            <div class="secondary-card">
                <div class="secondary-label">üõ¢Ô∏è Crude Oil</div>
                <div class="secondary-value" id="oil-price">--</div>
                <div class="secondary-change" id="oil-change">--</div>
                <div class="secondary-details">
                    <div class="secondary-details-row"><span>Prev Close</span><span id="oil-prev">--</span></div>
                    <div class="secondary-details-row"><span>52-wk High</span><span id="oil-high">--</span></div>
                    <div class="secondary-details-row"><span>52-wk Low</span><span id="oil-low">--</span></div>
                    <div class="secondary-details-row"><span>Symbol</span><span id="oil-symbol" class="sym">--</span></div>
                </div>
            </div>
        </div>
        
        <!-- METALS & CRYPTO -->
        <div class="section-header">Metals & Crypto</div>
        <div class="secondary-grid">
            <div class="secondary-card">
                <div class="secondary-label">ü•á Gold</div>
                <div class="secondary-value" id="gold-price">--</div>
                <div class="secondary-change" id="gold-change">--</div>
                <div class="secondary-details">
                    <div class="secondary-details-row"><span>Prev Close</span><span id="gold-prev">--</span></div>
                    <div class="secondary-details-row"><span>52-wk High</span><span id="gold-high">--</span></div>
                    <div class="secondary-details-row"><span>52-wk Low</span><span id="gold-low">--</span></div>
                    <div class="secondary-details-row"><span>Symbol</span><span id="gold-symbol" class="sym">--</span></div>
                </div>
            </div>
            <div class="secondary-card">
                <div class="secondary-label">ü•à Silver</div>
                <div class="secondary-value" id="silver-price">--</div>
                <div class="secondary-change" id="silver-change">--</div>
                <div class="secondary-details">
                    <div class="secondary-details-row"><span>Prev Close</span><span id="silver-prev">--</span></div>
                    <div class="secondary-details-row"><span>52-wk High</span><span id="silver-high">--</span></div>
                    <div class="secondary-details-row"><span>52-wk Low</span><span id="silver-low">--</span></div>
                    <div class="secondary-details-row"><span>Symbol</span><span id="silver-symbol" class="sym">--</span></div>
                </div>
            </div>
            <div class="secondary-card">
                <div class="secondary-label">ü™ô Bitcoin</div>
                <div class="secondary-value" id="btc-price">--</div>
                <div class="secondary-change" id="btc-change">--</div>
                <div class="secondary-details">
                    <div class="secondary-details-row"><span>Prev Close</span><span id="btc-prev">--</span></div>
                    <div class="secondary-details-row"><span>52-wk High</span><span id="btc-high">--</span></div>
                    <div class="secondary-details-row"><span>52-wk Low</span><span id="btc-low">--</span></div>
                    <div class="secondary-details-row"><span>Symbol</span><span id="btc-symbol" class="sym">--</span></div>
                </div>
            </div>
            <div class="secondary-card">
                <div class="secondary-label">üíé Kaspa</div>
                <div class="secondary-value" id="kas-price">--</div>
                <div class="secondary-change" id="kas-change">--</div>
                <div class="secondary-details">
                    <div class="secondary-details-row"><span>Prev Close</span><span id="kas-prev">--</span></div>
                    <div class="secondary-details-row"><span>52-wk High</span><span id="kas-high">--</span></div>
                    <div class="secondary-details-row"><span>52-wk Low</span><span id="kas-low">--</span></div>
                    <div class="secondary-details-row"><span>Symbol</span><span id="kas-symbol" class="sym">--</span></div>
                </div>
            </div>
            <div class="secondary-card">
                <div class="secondary-label">üìà S&P 500</div>
                <div class="secondary-value" id="sp500-price">--</div>
                <div class="secondary-change" id="sp500-change">--</div>
                <div class="secondary-details">
                    <div class="secondary-details-row"><span>Prev Close</span><span id="sp500-prev">--</span></div>
                    <div class="secondary-details-row"><span>52-wk High</span><span id="sp500-high">--</span></div>
                    <div class="secondary-details-row"><span>52-wk Low</span><span id="sp500-low">--</span></div>
                    <div class="secondary-details-row"><span>Symbol</span><span id="sp500-symbol" class="sym">--</span></div>
                </div>
            </div>
            <div class="secondary-card">
                <div class="secondary-label">üíµ USD Index</div>
                <div class="secondary-value" id="dxy-price">--</div>
                <div class="secondary-change" id="dxy-change">--</div>
                <div class="secondary-details">
                    <div class="secondary-details-row"><span>Prev Close</span><span id="dxy-prev">--</span></div>
                    <div class="secondary-details-row"><span>52-wk High</span><span id="dxy-high">--</span></div>
                    <div class="secondary-details-row"><span>52-wk Low</span><span id="dxy-low">--</span></div>
                    <div class="secondary-details-row"><span>Symbol</span><span id="dxy-symbol" class="sym">--</span></div>
                </div>
            </div>
        </div>
        
        <!-- NEWS & WEATHER side by side - NEWS FIRST (priority) -->
        <div class="two-col">
            <div>
                <div class="section-header">üì∞ Ag News</div>
                <div class="news-card" id="news-feed" style="max-height:420px;overflow-y:auto">
                    <div class="news-item loading">Loading news...</div>
                </div>
            </div>
            <div>
                <div class="section-header">üå§Ô∏è Weather</div>
                <div class="weather-card">
                    <iframe src="https://embed.windy.com/embed2.html?lat=45.4&lon=-91.85&detailLat=45.4&detailLon=-91.85&width=650&height=420&zoom=7&level=surface&overlay=rain&product=ecmwf&menu=&message=true&marker=&calendar=now&pressure=&type=map&location=coordinates&detail=&metricWind=mph&metricTemp=%C2%B0F&radarRange=-1" frameborder="0" title="Windy Weather"></iframe>
                </div>
            </div>
        </div>
    </main>
    
    <footer>
        <div class="footer-links">
            <a href="https://farmers1st.com" target="_blank">üåæ Farmers First Agri</a>
            <a href="https://lokedrone.com" target="_blank">‚úàÔ∏è Loke Drone</a>
            <a href="https://usdronemap.com" target="_blank">üó∫Ô∏è US Drone Map</a>
        </div>
        <div style="margin-top:8px;font-size:0.7rem;color:var(--dim)">Built in Barron County, WI ‚Ä¢ ¬© 2026 AGSIST</div>
    </footer>
    
    <script>
    async function loadData() {
        try {
            const res = await fetch('data/markets.json');
            if (!res.ok) throw new Error('Failed to load');
            const data = await res.json();
            
            // Update time
            document.getElementById('update-time').textContent = 
                new Date(data.updated).toLocaleString([], {month:'short', day:'numeric', hour:'2-digit', minute:'2-digit'});
            document.getElementById('update-time').classList.remove('loading');
            
            const m = data.markets;
            
            // Helper to format price
            const fmt = (val, unit) => {
                if (unit === '¬¢/bu') return (val / 100).toFixed(2);
                if (unit === '¬¢/lb') return val.toFixed(2);
                if (unit === '$/cwt') return val.toFixed(2);
                if (unit === '$/bbl') return val.toFixed(2);
                return val.toFixed(2);
            };
            
            // Helper to set change class
            const chgClass = (val) => val >= 0 ? 'up' : 'down';
            const chgSign = (val) => val >= 0 ? '+' : '';
            
            // CORN
            if (m.grains?.corn) {
                const c = m.grains.corn;
                document.getElementById('corn-contract').textContent = c.contract || 'Front';
                document.getElementById('corn-price').textContent = '$' + fmt(c.price, c.unit);
                document.getElementById('corn-change').textContent = chgSign(c.change) + (c.change/100).toFixed(2) + ' (' + chgSign(c.changePct) + c.changePct.toFixed(1) + '%)';
                document.getElementById('corn-change').className = 'price-change ' + chgClass(c.change);
                if (c.prevClose) document.getElementById('corn-prev').textContent = '$' + fmt(c.prevClose, c.unit);
                if (c.high52) document.getElementById('corn-high').textContent = '$' + fmt(c.high52, c.unit);
                if (c.low52) document.getElementById('corn-low').textContent = '$' + fmt(c.low52, c.unit);
                if (c.symbol) document.getElementById('corn-symbol').textContent = c.symbol;
            }
            
            // CORN DEC
            if (m.grains?.corn_dec) {
                const c = m.grains.corn_dec;
                document.getElementById('corn-dec-price').textContent = '$' + fmt(c.price, c.unit);
                document.getElementById('corn-dec-change').textContent = chgSign(c.change) + (c.change/100).toFixed(2) + ' (' + chgSign(c.changePct) + c.changePct.toFixed(1) + '%)';
                document.getElementById('corn-dec-change').className = 'price-change ' + chgClass(c.change);
                if (c.prevClose) document.getElementById('corn-dec-prev').textContent = '$' + fmt(c.prevClose, c.unit);
                if (c.high52) document.getElementById('corn-dec-high').textContent = '$' + fmt(c.high52, c.unit);
                if (c.low52) document.getElementById('corn-dec-low').textContent = '$' + fmt(c.low52, c.unit);
                if (c.symbol) document.getElementById('corn-dec-symbol').textContent = c.symbol;
            }
            
            // SOYBEANS
            if (m.grains?.soybeans) {
                const c = m.grains.soybeans;
                document.getElementById('soy-contract').textContent = c.contract || 'Front';
                document.getElementById('soy-price').textContent = '$' + fmt(c.price, c.unit);
                document.getElementById('soy-change').textContent = chgSign(c.change) + (c.change/100).toFixed(2) + ' (' + chgSign(c.changePct) + c.changePct.toFixed(1) + '%)';
                document.getElementById('soy-change').className = 'price-change ' + chgClass(c.change);
                if (c.prevClose) document.getElementById('soy-prev').textContent = '$' + fmt(c.prevClose, c.unit);
                if (c.high52) document.getElementById('soy-high').textContent = '$' + fmt(c.high52, c.unit);
                if (c.low52) document.getElementById('soy-low').textContent = '$' + fmt(c.low52, c.unit);
                if (c.symbol) document.getElementById('soy-symbol').textContent = c.symbol;
            }
            
            // SOYBEANS NOV
            if (m.grains?.soybeans_nov) {
                const c = m.grains.soybeans_nov;
                document.getElementById('soy-nov-price').textContent = '$' + fmt(c.price, c.unit);
                document.getElementById('soy-nov-change').textContent = chgSign(c.change) + (c.change/100).toFixed(2) + ' (' + chgSign(c.changePct) + c.changePct.toFixed(1) + '%)';
                document.getElementById('soy-nov-change').className = 'price-change ' + chgClass(c.change);
                if (c.prevClose) document.getElementById('soy-nov-prev').textContent = '$' + fmt(c.prevClose, c.unit);
                if (c.high52) document.getElementById('soy-nov-high').textContent = '$' + fmt(c.high52, c.unit);
                if (c.low52) document.getElementById('soy-nov-low').textContent = '$' + fmt(c.low52, c.unit);
                if (c.symbol) document.getElementById('soy-nov-symbol').textContent = c.symbol;
            }
            
            // WHEAT
            if (m.grains?.wheat) {
                const c = m.grains.wheat;
                document.getElementById('wheat-price').textContent = '$' + fmt(c.price, c.unit);
                document.getElementById('wheat-change').textContent = chgSign(c.changePct) + c.changePct.toFixed(1) + '%';
                document.getElementById('wheat-change').className = 'secondary-change ' + chgClass(c.change);
                if (c.prevClose) document.getElementById('wheat-prev').textContent = '$' + fmt(c.prevClose, c.unit);
                if (c.high52) document.getElementById('wheat-high').textContent = '$' + fmt(c.high52, c.unit);
                if (c.low52) document.getElementById('wheat-low').textContent = '$' + fmt(c.low52, c.unit);
                if (c.symbol) document.getElementById('wheat-symbol').textContent = c.symbol;
            }
            
            // CATTLE
            if (m.livestock?.cattle) {
                const c = m.livestock.cattle;
                document.getElementById('cattle-price').textContent = '$' + c.price.toFixed(2);
                document.getElementById('cattle-change').textContent = chgSign(c.changePct) + c.changePct.toFixed(1) + '%';
                document.getElementById('cattle-change').className = 'secondary-change ' + chgClass(c.change);
                if (c.prevClose) document.getElementById('cattle-prev').textContent = '$' + c.prevClose.toFixed(2);
                if (c.high52) document.getElementById('cattle-high').textContent = '$' + c.high52.toFixed(2);
                if (c.low52) document.getElementById('cattle-low').textContent = '$' + c.low52.toFixed(2);
                if (c.symbol) document.getElementById('cattle-symbol').textContent = c.symbol;
            }
            
            // FEEDER
            if (m.livestock?.feeder) {
                const c = m.livestock.feeder;
                document.getElementById('feeder-price').textContent = '$' + c.price.toFixed(2);
                document.getElementById('feeder-change').textContent = chgSign(c.changePct) + c.changePct.toFixed(1) + '%';
                document.getElementById('feeder-change').className = 'secondary-change ' + chgClass(c.change);
                if (c.prevClose) document.getElementById('feeder-prev').textContent = '$' + c.prevClose.toFixed(2);
                if (c.high52) document.getElementById('feeder-high').textContent = '$' + c.high52.toFixed(2);
                if (c.low52) document.getElementById('feeder-low').textContent = '$' + c.low52.toFixed(2);
                if (c.symbol) document.getElementById('feeder-symbol').textContent = c.symbol;
            }
            
            // HOGS
            if (m.livestock?.hogs) {
                const c = m.livestock.hogs;
                document.getElementById('hogs-price').textContent = '$' + c.price.toFixed(2);
                document.getElementById('hogs-change').textContent = chgSign(c.changePct) + c.changePct.toFixed(1) + '%';
                document.getElementById('hogs-change').className = 'secondary-change ' + chgClass(c.change);
                if (c.prevClose) document.getElementById('hogs-prev').textContent = '$' + c.prevClose.toFixed(2);
                if (c.high52) document.getElementById('hogs-high').textContent = '$' + c.high52.toFixed(2);
                if (c.low52) document.getElementById('hogs-low').textContent = '$' + c.low52.toFixed(2);
                if (c.symbol) document.getElementById('hogs-symbol').textContent = c.symbol;
            }
            
            // MILK
            if (m.livestock?.milk) {
                const c = m.livestock.milk;
                document.getElementById('milk-price').textContent = '$' + c.price.toFixed(2);
                document.getElementById('milk-change').textContent = chgSign(c.changePct) + c.changePct.toFixed(1) + '%';
                document.getElementById('milk-change').className = 'secondary-change ' + chgClass(c.change);
                if (c.prevClose) document.getElementById('milk-prev').textContent = '$' + c.prevClose.toFixed(2);
                if (c.high52) document.getElementById('milk-high').textContent = '$' + c.high52.toFixed(2);
                if (c.low52) document.getElementById('milk-low').textContent = '$' + c.low52.toFixed(2);
                if (c.symbol) document.getElementById('milk-symbol').textContent = c.symbol;
            }
            
            // OIL
            if (m.energy?.oil) {
                const c = m.energy.oil;
                document.getElementById('oil-price').textContent = '$' + c.price.toFixed(2);
                document.getElementById('oil-change').textContent = chgSign(c.changePct) + c.changePct.toFixed(1) + '%';
                document.getElementById('oil-change').className = 'secondary-change ' + chgClass(c.change);
                if (c.prevClose) document.getElementById('oil-prev').textContent = '$' + c.prevClose.toFixed(2);
                if (c.high52) document.getElementById('oil-high').textContent = '$' + c.high52.toFixed(2);
                if (c.low52) document.getElementById('oil-low').textContent = '$' + c.low52.toFixed(2);
                if (c.symbol) document.getElementById('oil-symbol').textContent = c.symbol;
            }
            
            // GOLD
            if (m.metals?.gold) {
                const c = m.metals.gold;
                document.getElementById('gold-price').textContent = '$' + c.price.toFixed(0);
                document.getElementById('gold-change').textContent = chgSign(c.changePct) + c.changePct.toFixed(1) + '%';
                document.getElementById('gold-change').className = 'secondary-change ' + chgClass(c.change);
                if (c.prevClose) document.getElementById('gold-prev').textContent = '$' + c.prevClose.toFixed(0);
                if (c.high52) document.getElementById('gold-high').textContent = '$' + c.high52.toFixed(0);
                if (c.low52) document.getElementById('gold-low').textContent = '$' + c.low52.toFixed(0);
                if (c.symbol) document.getElementById('gold-symbol').textContent = c.symbol;
            }
                if (c.low52) document.getElementById('gold-low').textContent = '$' + c.low52.toFixed(0);
            }
            
            // SILVER
            if (m.metals?.silver) {
                const c = m.metals.silver;
                document.getElementById('silver-price').textContent = '$' + c.price.toFixed(2);
                document.getElementById('silver-change').textContent = chgSign(c.changePct) + c.changePct.toFixed(1) + '%';
                document.getElementById('silver-change').className = 'secondary-change ' + chgClass(c.change);
                if (c.prevClose) document.getElementById('silver-prev').textContent = '$' + c.prevClose.toFixed(2);
                if (c.high52) document.getElementById('silver-high').textContent = '$' + c.high52.toFixed(2);
                if (c.low52) document.getElementById('silver-low').textContent = '$' + c.low52.toFixed(2);
                if (c.symbol) document.getElementById('silver-symbol').textContent = c.symbol;
            }
            
            // BITCOIN
            if (m.crypto?.bitcoin) {
                const c = m.crypto.bitcoin;
                document.getElementById('btc-price').textContent = '$' + c.price.toLocaleString(undefined, {maximumFractionDigits: 0});
                document.getElementById('btc-change').textContent = chgSign(c.changePct) + c.changePct.toFixed(1) + '%';
                document.getElementById('btc-change').className = 'secondary-change ' + chgClass(c.change);
                if (c.prevClose) document.getElementById('btc-prev').textContent = '$' + c.prevClose.toLocaleString(undefined, {maximumFractionDigits: 0});
                if (c.high52) document.getElementById('btc-high').textContent = '$' + c.high52.toLocaleString(undefined, {maximumFractionDigits: 0});
                if (c.low52) document.getElementById('btc-low').textContent = '$' + c.low52.toLocaleString(undefined, {maximumFractionDigits: 0});
                if (c.symbol) document.getElementById('btc-symbol').textContent = c.symbol;
            }
            
            // KASPA
            if (m.crypto?.kaspa) {
                const c = m.crypto.kaspa;
                document.getElementById('kas-price').textContent = '$' + c.price.toFixed(3);
                document.getElementById('kas-change').textContent = chgSign(c.changePct) + c.changePct.toFixed(1) + '%';
                document.getElementById('kas-change').className = 'secondary-change ' + chgClass(c.change);
                if (c.prevClose) document.getElementById('kas-prev').textContent = '$' + c.prevClose.toFixed(3);
                if (c.high52) document.getElementById('kas-high').textContent = '$' + c.high52.toFixed(3);
                if (c.low52) document.getElementById('kas-low').textContent = '$' + c.low52.toFixed(3);
                if (c.symbol) document.getElementById('kas-symbol').textContent = c.symbol;
            }
            
            // S&P 500
            if (m.indices?.sp500) {
                const c = m.indices.sp500;
                document.getElementById('sp500-price').textContent = c.price.toLocaleString(undefined, {maximumFractionDigits: 0});
                document.getElementById('sp500-change').textContent = chgSign(c.changePct) + c.changePct.toFixed(1) + '%';
                document.getElementById('sp500-change').className = 'secondary-change ' + chgClass(c.change);
                if (c.prevClose) document.getElementById('sp500-prev').textContent = c.prevClose.toLocaleString(undefined, {maximumFractionDigits: 0});
                if (c.high52) document.getElementById('sp500-high').textContent = c.high52.toLocaleString(undefined, {maximumFractionDigits: 0});
                if (c.low52) document.getElementById('sp500-low').textContent = c.low52.toLocaleString(undefined, {maximumFractionDigits: 0});
                if (c.symbol) document.getElementById('sp500-symbol').textContent = c.symbol;
            }
            
            // USD INDEX
            if (m.indices?.dollar) {
                const c = m.indices.dollar;
                document.getElementById('dxy-price').textContent = c.price.toFixed(2);
                document.getElementById('dxy-change').textContent = chgSign(c.changePct) + c.changePct.toFixed(1) + '%';
                document.getElementById('dxy-change').className = 'secondary-change ' + chgClass(c.change);
                if (c.prevClose) document.getElementById('dxy-prev').textContent = c.prevClose.toFixed(2);
                if (c.high52) document.getElementById('dxy-high').textContent = c.high52.toFixed(2);
                if (c.low52) document.getElementById('dxy-low').textContent = c.low52.toFixed(2);
                if (c.symbol) document.getElementById('dxy-symbol').textContent = c.symbol;
            }
            
            // NEWS - show more articles
            if (data.news && data.news.length > 0) {
                const newsEl = document.getElementById('news-feed');
                newsEl.innerHTML = data.news.slice(0, 15).map(n => `
                    <div class="news-item">
                        <a href="${n.link}" target="_blank">${n.title}</a>
                        <div class="news-source">${n.source || 'Ag News'}</div>
                    </div>
                `).join('');
            }
            
            // TICKER
            buildTicker(m, data.news || []);
            
        } catch (e) {
            console.error(e);
            document.getElementById('update-time').textContent = 'Offline';
            document.getElementById('update-time').classList.remove('loading');
        }
    }
    
    function buildTicker(m, news) {
        const items = [];
        const chgClass = (val) => val >= 0 ? 'up' : 'down';
        const chgSign = (val) => val >= 0 ? '+' : '';
        
        // Corn
        if (m.grains?.corn) {
            const c = m.grains.corn;
            items.push(`<span class="ticker-item"><span class="label">üåΩ Corn</span><span class="price">$${(c.price/100).toFixed(2)}</span><span class="change ${chgClass(c.change)}">${chgSign(c.changePct)}${c.changePct.toFixed(1)}%</span></span>`);
        }
        
        // Soybeans
        if (m.grains?.soybeans) {
            const c = m.grains.soybeans;
            items.push(`<span class="ticker-item"><span class="label">ü´ò Beans</span><span class="price">$${(c.price/100).toFixed(2)}</span><span class="change ${chgClass(c.change)}">${chgSign(c.changePct)}${c.changePct.toFixed(1)}%</span></span>`);
        }
        
        // Wheat
        if (m.grains?.wheat) {
            const c = m.grains.wheat;
            items.push(`<span class="ticker-item"><span class="label">üåæ Wheat</span><span class="price">$${(c.price/100).toFixed(2)}</span><span class="change ${chgClass(c.change)}">${chgSign(c.changePct)}${c.changePct.toFixed(1)}%</span></span>`);
        }
        
        // Cattle
        if (m.livestock?.cattle) {
            const c = m.livestock.cattle;
            items.push(`<span class="ticker-item"><span class="label">üêÑ Cattle</span><span class="price">$${c.price.toFixed(2)}</span><span class="change ${chgClass(c.change)}">${chgSign(c.changePct)}${c.changePct.toFixed(1)}%</span></span>`);
        }
        
        // Bitcoin
        if (m.crypto?.bitcoin) {
            const c = m.crypto.bitcoin;
            items.push(`<span class="ticker-item"><span class="label">‚Çø BTC</span><span class="price">$${c.price.toLocaleString(undefined,{maximumFractionDigits:0})}</span><span class="change ${chgClass(c.change)}">${chgSign(c.changePct)}${c.changePct.toFixed(1)}%</span></span>`);
        }
        
        // Kaspa - 3 decimal places
        if (m.crypto?.kaspa) {
            const c = m.crypto.kaspa;
            items.push(`<span class="ticker-item"><span class="label">KAS</span><span class="price">$${c.price.toFixed(3)}</span><span class="change ${chgClass(c.change)}">${chgSign(c.changePct)}${c.changePct.toFixed(1)}%</span></span>`);
        }
        
        // Add news headlines
        if (news.length > 0) {
            news.slice(0, 3).forEach(n => {
                items.push(`<span class="ticker-item news">üì∞ ${n.title}</span>`);
            });
        }
        
        // Duplicate for seamless scroll
        const tickerEl = document.getElementById('ticker');
        tickerEl.innerHTML = items.join('') + items.join('');
    }
    
    loadData();
    // Refresh every 2 minutes
    setInterval(loadData, 2 * 60 * 1000);
    
    // Welcome message based on time
    function getGreeting() {
        const hour = new Date().getHours();
        if (hour < 5) return 'üåô Late night';
        if (hour < 12) return '‚òÄÔ∏è Good morning';
        if (hour < 17) return 'üå§Ô∏è Good afternoon';
        if (hour < 21) return 'üåÖ Good evening';
        return 'üåô Good night';
    }
    
    function setWelcome(location) {
        const greeting = getGreeting();
        const msg = location ? `${greeting} from ${location}` : greeting;
        document.getElementById('welcome-msg').textContent = msg;
    }
    
    // Geolocation for welcome message
    if ('geolocation' in navigator) {
        navigator.geolocation.getCurrentPosition(
            (pos) => {
                fetch(`https://nominatim.openstreetmap.org/reverse?lat=${pos.coords.latitude}&lon=${pos.coords.longitude}&format=json`)
                    .then(r => r.json())
                    .then(data => {
                        const county = data.address?.county || data.address?.city || data.address?.state || '';
                        if (county) setWelcome(county);
                    })
                    .catch(() => setWelcome('Wisconsin'));
            },
            () => setWelcome(''),
            { timeout: 5000, maximumAge: 600000 }
        );
    } else {
        setWelcome('');
    }
    
    // Register Service Worker for PWA
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js').then(() => {
            console.log('AGSIST: Service Worker registered');
        }).catch((err) => {
            console.log('SW registration failed:', err);
        });
    }
    </script>
</body>
</html>
